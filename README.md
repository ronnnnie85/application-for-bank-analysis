# Приложение для анализа банковских транзакций

## Описание

Это консольное приложение для анализа финансовых операций, экспортированных из Excel-файла. Оно предоставляет следующие возможности:

- **Веб-страницы**: генерирует JSON-ответы для страниц "Главная" и "События" с информацией о расходах, поступлениях, курсах валют и ценах акций.
- **Сервисы**: реализует несколько утилит для анализа транзакций:
  - Выгодные категории повышенного кешбэка
  - Инвесткопилка (округление трат)
  - Простой поиск по ключевому слову
  - Поиск транзакций по телефонным номерам
  - Поиск переводов физическим лицам
- **Отчеты**: формирует Excel-отчёты и JSON-файлы для трёх видов отчётов:
  - Траты по категории за последние три месяца
  - Средние траты по дням недели за последние три месяца
  - Средние траты в рабочие/выходные дни за последние три месяца

## Структура проекта

```text
.
├── src
│   ├── config.py            # Константы и глобальные настройки
│   ├── loggers.py           # Фабрика логгеров
│   ├── utils.py             # Общие утилиты (парсинг, подсчёты)
│   ├── api_utils.py         # Запросы к API валют и акций
│   ├── transaction_utils.py # Фильтрация и обработка списка транзакций
│   ├── views.py             # Генерация JSON для веб-страниц
│   ├── services.py          # Реализация бизнес-сервисов
│   ├── services_utils.py    # Вспомогательные функции для сервисов
│   ├── reports.py           # Функции-отчёты с декоратором логирования
│   ├── reports_utils.py     # Вспомогательные функции для отчётов
│   └── main.py              # Точка входа в приложение
├── data
│   └── operations.xlsx      # Файл с транзакциями
├── reports                  # Папка для выходных JSON-файлов отчётов
├── tests                    # Юнит-тесты для всех модулей
├── .env                     # Файл с реальными ключами API (в .gitignore)
├── .env_template            # Шаблон файла .env
├── .flake8                  # Конфигурация Flake8 (max-line-length=119)
├── pyproject.toml          # Настройки Poetry, Black, isort, mypy
├── poetry.lock
├── .gitignore
└── README.md
```

## Быстрый старт

1. **Клонируйте репозиторий**:
   ```bash
   git clone <URL репозитория>
   cd <директория проекта>
   git checkout develop
   ```
2. **Установите зависимости** (используется Poetry):
   ```bash
   poetry install
   ```
3. **Скопируйте шаблон `.env` и заполните** ваши ключи API:
   ```bash
   cp .env.example .env
   # затем в .env указать значения переменных
   ```
4. **Запустите приложение**:
   ```bash
   poetry run python -m main
   ```

## Конфигурация

- Ключи для доступа к API валют и акций задаются в файле `.env`.
- Пользовательские настройки (список валют и акций) — в `user_settings.json`.

## Пример использования

После запуска:

```
Привет! Добро пожаловать в программу анализа банковских операций

Выберите необходимый пункт меню:
1. Категория "Веб-страницы"
2. Категория "Сервисы"
3. Категория "Отчеты"
```

Далее следуйте инструкциям на экране, вводя дату/параметры для нужной функции.

## Тестирование и качество кода

- **Запуск тестов**:
  ```bash
  poetry run pytest --maxfail=1 --disable-warnings -q
  ```
- **Статический анализ**:
  ```bash
  poetry run flake8 
  poetry run isort --check-only src tests 
  poetry run black --check .
  poetry run mypy src
  ```

## Лицензия

Проект распространяется под MIT License.

